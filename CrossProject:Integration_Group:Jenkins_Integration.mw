== Maintainer ==
Luis Gomez (ecelgp@gmail.com)

== Introduction ==
This instruction explains how to configure Jenkins in a community Lab to trigger and automate OpenDaylight tests. 

== Master Jenkins Installation ==
Jenkins can be installed in one of the following VMs:

* 1. Stand-alone VM

* 2. Same VM as Robot FW (recommended)

* 3. Same VM as Robot FW and device simulation (mininet, CBench)

* 4. Same VM as Robot FW, device simulation (mininet, CBench) and controller (not recommended)


Option 2 is recommended because controller and device simulation should run in their own VM

Option 4 is not recommended because both controller and Jenkins use default port 8080 for the GUI


Please follow this link to install Jenkins: https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins

Once you are done with the installation, you should be able to open the Jenkins GUI at http://127.0.0.1:8080

<br/> [[File:0-Jenkins-Main.png|900px]] <br/>

== Master Jenkins Configuration ==

=== 1. Setup Security ===

On the left menu click on '''Manage Jenkins''':

<br/> [[File:1-Jenkins-Manage.png|900px]] <br/><br/>

Press on '''Setup Security''' and configure as below:

<br/> [[File:2-Jenkins-Security.png|900px]] <br/><br/>

After saving changes you will be redirected to main page, from there select '''Sign-up''' on the top right corner and fill as below:

<br/> [[File:3-Jenkins-Signup.png|600px]] <br/><br/>

Now you are logged in as odluser.

=== 2. Install Plugins ===

Go to '''Manage Jenkins''' > '''Manage Plugins''' and select '''Available''' tab

<br/> [[File:4-Jenkins-Plugins.png|900px]] <br/><br/>

Search and select following packages:

* Conditional Buildstep Plugin
* EnvInjec Plugin
* Gerrit Trigger
* Git Client Plugin
* GIT Plugin
* Parameterized Trigger plugin
* Robot Framework plugin
* XTrigger Plug-in

Then press on '''Install without restart'''

Select Restart Jenkins when installation is complete at the bottom:

<br/> [[File:5-Jenkins-Update.png|900px]] <br/><br/>

== Slave Jenkins Install ==

Slave Jenkins will be installed on the other VMs that are part of the test bed. In this example the controller VM.

=== 1. Setup SSH access Master to Slave ===

Generate SSH key pair in Jenkins Master (if they are not available under ~/.ssh), set the right file permissions and move the Master public key to the Slave (controller VM):

<pre>
~\> cd ~
~\> ssh-keygen
~\> chmod 700 .ssh
~\> cd .ssh
~/.ssh\> chmod 600 id_rsa
~/.ssh\> ssh-copy-id <controllerUser>@<controllerIP>
</pre>

Check the SSH key is properly installed by connecting to controller and verifying no password is being asked:

<pre>
~/.ssh\> ssh <controllerUser>@<controllerIP>
Welcome to Ubuntu 12.04.4 LTS (GNU/Linux 3.11.0-15-generic x86_64)
</pre>

Copy the public key 

[[Category:Integration Group]]
