This page summarizes how data from BGP and PCEP can be viewed through RESTCONF. Currently it is the only way to view the data.

Basic URL for both protocols is 

''http://localhost:8080/restconf/operational/network-topology:network-topology/''

If BGP-LS and PCEP are configured properly, it should display output similar to this one:

 <network-topology>
  <topology>
   <topology-id>pcep-topology</topology-id>
   <topology-types>
    <topology-pcep/>
   </topology-types>
  </topology>
  <topology>
   <server-provided>true</server-provided>
   <topology-id>example-ipv4-topology</topology-id>
   <topology-types/>
  </topology>
  <topology>
   <server-provided>true</server-provided>
   <topology-id>example-linkstate-topology</topology-id>
   <topology-types/>
  </topology>
 </network-topology>

== BGP-LS ==

BGP data as were sent from BGP speaker are listed in three topologies (if all three are configured):

'''example-linkstate-topology''' - displays links and nodes advertised through linkstate Update messages

''http://localhost:8080/restconf/operational/network-topology:network-topology/topology/example-linkstate-topology''

'''example-ipv4-topology''' - display Ipv4 adresses of nodes in the topology

''http://localhost:8080/restconf/operational/network-topology:network-topology/topology/example-ipv4-topology''

Another view of BGP data is through '''BGP local RIB''', located here:

''http://localhost:8080/restconf/operational/bgp-rib:bgp-rib/rib/example-bgp-rib/loc-rib/''

This is how the output looks like, when address families for IPv4 and Linkstate were configured:

 <loc-rib>
  <tables>
   <uptodate>true</uptodate>
   <safi>bgp-ls:linkstate-subsequent-address-family</safi>
   <afi>bgp-ls:linkstate-address-family</afi>
  </tables>
  <tables>
   <uptodate>true</uptodate>
   <safi>bgp-t:unicast-subsequent-address-family</safi>
   <afi>bgp-t:ipv4-address-family</afi>
  </tables>
 </loc-rib>

You can see details for each AFI by expanding the RESTCONF link:

Linkstate : ''http://localhost:8080/restconf/operational/bgp-rib:bgp-rib/rib/example-bgp-rib/loc-rib/tables/bgp-types:ipv4-address-family/bgp-types:unicast-subsequent-address-family/ipv4-routes''

IPv4 : ''http://localhost:8080/restconf/operational/bgp-rib:bgp-rib/rib/example-bgp-rib/loc-rib/tables/bgp-linkstate:linkstate-address-family/bgp-linkstate:linkstate-subsequent-address-family/linkstate-routes''

== PCEP ==

PCEP data is displayed only through one URL that is accessible from the base network-topology URL:

''http://localhost:8080/restconf/operational/network-topology:network-topology/topology/pcep-topology''

Note that the output changes slightly when using different versions of stateful draft.

=== draft-stateful-v02 ===

Each PCC will be displayed as a node:

 <node>
  <path-computation-client>
   <ip-address>42.42.42.42</ip-address>
   <state-sync>synchronized</state-sync>
   <stateful-tlv>
    <stateful>
     <include-db-version>false</include-db-version>
     <lsp-update-capability>true</lsp-update-capability>
     <initiation>true</initiation>
    </stateful>
   </stateful-tlv>
  </path-computation-client>
  <node-id>pcc://42.42.42.42</node-id>
 </node>

If some tunnels are configured on the network, they would be displayed on the same page, within a node that initiated the tunnel:

 <node>
  <path-computation-client>
   <state-sync>synchronized</state-sync>
   <stateful-tlv>
    <stateful>
     <include-db-version>false</include-db-version>
     <lsp-update-capability>true</lsp-update-capability>
     <initiation>true</initiation>
    </stateful>
   </stateful-tlv>
   <reported-lsp>
    <name>update-tunel</name>
    <lsp>
     <delegate>true</delegate>
     <ignore>false</ignore>
     <operational>false</operational>
     <plsp-id>50</plsp-id>
     <processing-rule>false</processing-rule>
     <remove>false</remove>
     <sync>false</sync>
     <tlvs>
      <symbolic-path-name>
       <path-name>dXBkYXRlLXR1bmVs</path-name>
      </symbolic-path-name>
     </tlvs>
    </lsp>
   </reported-lsp>
   <ip-address>39.39.39.39</ip-address>
  </path-computation-client>
  <node-id>pcc://39.39.39.39</node-id>
 </node>

Note that, ''<path-name>'' tag displays tunnel name in Base64 encoding.

=== draft-stateful-v07 ===

Each PCC will be displayed as a node:

 <node>
  <path-computation-client>
   <ip-address>42.42.42.42</ip-address>
   <state-sync>synchronized</state-sync>
   <stateful-tlv>
    <stateful>
     <initiation>true</initiation>
     <lsp-update-capability>true</lsp-update-capability>
    </stateful>
   </stateful-tlv>
  </path-computation-client>
  <node-id>pcc://42.42.42.42</node-id>
 </node>

If some tunnels are configured on the network, they would be displayed on the same page, within a node that initiated the tunnel:

 <node>
  <path-computation-client>
   <state-sync>synchronized</state-sync>
   <stateful-tlv>
    <stateful>
     <initiation>true</initiation>
     <lsp-update-capability>true</lsp-update-capability>
    </stateful>
   </stateful-tlv>
   <reported-lsp>
    <name>foo</name>
    <lsp>
     <operational>down</operational>
     <sync>false</sync>
     <ignore>false</ignore>
     <plsp-id>1</plsp-id>
     <create>false</create>
     <administrative>true</administrative>
     <remove>false</remove>
     <delegate>true</delegate>
     <processing-rule>false</processing-rule>
     <tlvs>
      <lsp-identifiers>
       <ipv4>
        <ipv4-tunnel-sender-address>43.43.43.43</ipv4-tunnel-sender-address>
        <ipv4-tunnel-endpoint-address>0.0.0.0</ipv4-tunnel-endpoint-address>
        <ipv4-extended-tunnel-id>0.0.0.0</ipv4-extended-tunnel-id>
       </ipv4>
       <tunnel-id>0</tunnel-id>
       <lsp-id>0</lsp-id>
      </lsp-identifiers>
      <symbolic-path-name>
       <path-name>Zm9v</path-name>
      </symbolic-path-name>
     </tlvs>
    </lsp>
   </reported-lsp>
   <ip-address>43.43.43.43</ip-address>
  </path-computation-client>
  <node-id>pcc://43.43.43.43</node-id>
 </node>

Note that, ''<path-name>'' tag displays tunnel name in Base64 encoding.
