In the Hydrogen release, the Netconf Client (NCC) must be configured with the address and login credentials (username/password) for each target Netconf Server to which it connects. An NCC instance must be configured for a each target Server.

The yang model for NCC configuration can be found at {{git/link|controller.git|opendaylight/md-sal/sal-netconf-connector/src/main/yang/odl-sal-netconf-connector-cfg.yang}}. The per target Server configuration includes the target Server's IP address, port, connection type (TCP or SSH), and username/password. The NCC configuration also includes a reference to MD-SAL and the configuration of NCC's thread group for opening and maintaining sockets and its event executor for sourcing events into MD-SAL. Defaults values for global configuration, defined in this page, should be used in most cases.

=Configuring Netconf client with yangcli-pro=

== Requirements ==
yangcli-pro version 13.04-7.1 or later.

== Prerequisites & Limitations ==

yangcli-pro currently can not process the ODL network-topology model. It needs to be excluded from the list of models exported by the Configuration Subsystem to its clients. Make sure that .*ietf-topology.* is present in the ''configuration/config.ini'' file where the yangstore blacklist is defined. For example:

<pre>
yangstore.blacklist=.*controller.model.*|.*ietf-topology
</pre>

== Connecting to the Controller Configuration Server ==

To connect to the controller's config server with a plain TCP connection, use the syntax described below. No authentication is performed for TCP connection, user and password parameters can bye any ascii strings. 
<pre>
yangcli-pro --user=a --password=a --transport=tcp --ncport=8383 --server=localhost
</pre>

Alternatively, you may connect using SSH: 
<pre>
yangcli-pro --user=netconf --password=netconf --transport=ssh --ncport=1830 --server=localhost
</pre>

For better debugging please include following arguments:

<pre>
 --log=/tmp/yuma.log --log-level=debug4
</pre>
Note that when the log file is set, the output will not appear on stdout.

== Configuring an NCC Instance ==
This example shows how to configure the NCC to connect to the collector's own Netconf server. The controller's configuration subsystem can then be accessed through the controller's NB Restconf API.

Once yangcli-pro connects to the controller's Netconf server, issue the following sequence of commands:

# Enter '''merge /modules/module'''. yangcli-pro will prompt for a string value for leaf <name>. This is the name of the module that we are configuring.
# Enter '''controller''' for the name of the module, since we are configuring the NCC for the controller (you can enter any ascii name you like). yangcli-pro will prompt for a string value for leaf <type>. This is the type of the module that we are configuring.
# Enter '''sal-netconf-connector'''. yangcli-pro will print a list of possible choices for the selection of the case statement, as shown below.
<pre>
  1: case netty-threadgroup-fixed:
       leaf thread-count
  2: case binding-broker-impl:
       container data-broker
       container notification-service
  3: case binding-data-broker:
       container dom-broker
       container mapping-service
  4: case logback:
       list file-appenders
       list rolling-appenders
       list console-appenders
       list loggers
  5: case dom-broker-impl:
       container data-store
  6: case threadpool-flexible:
       leaf max-thread-count
       leaf minThreadCount
       leaf keepAliveMillis
       container threadFactory
  7: case remote-zeromq-rpc-server:
       container dom-broker
       leaf port
  8: case shutdown:
       leaf secret
       leaf old-secret
  9: case threadpool-scheduled:
       leaf max-thread-count
       container threadFactory
  10: case netty-hashed-wheel-timer:
       leaf tick-duration
       leaf ticks-per-wheel
       container thread-factory
  11: case async-eventbus:
       container threadpool
  12: case threadfactory-naming:
       leaf name-prefix
  13: case sal-netconf-connector:
       leaf address
       leaf port
       leaf tcp-only
       leaf username
       leaf password
       container dom-registry
       container boss-thread-group
       container worker-thread-group
       container event-executor
  14: case threadpool-fixed:
       leaf max-thread-count
</pre>
# Enter the number of the line that contains the ''sal-netconf-connector'' case ('''13''' in this case). Yangcli-pro will now prompt for target server's IP address:
# Enter the target server's '''<IP-Address>''' (for example, '''localhost''' or '''127.0.0.1''' if yangcli-pro is running on the same host as the controller). Yangcli-pro will now prompt for the target server's port:
# Enter the target server's '''<Port-Number>''' ('''8383''' in our case, since we're configuring a TCP connection; if we were configuring an SH connection, '''1830''' would be entered)
