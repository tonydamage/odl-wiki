= About =
This page provides the procedure to demonstrate configuration of [[OpenDaylight Virtual Tenant Network (VTN):VTN Coordinator|VTN Coordinator]] with L2 network using VTN Virtualization

[[File:Example for VTN Virtualization.png|border|530px]]

The OpenDaylight Virtualization information on Virtual Tenant Network can be found from the link below:

*[[https://wiki.opendaylight.org/view/OpenDaylight_Virtual_Tenant_Network_(VTN):Installation:Virtualization_Edition|VTN Virtualization]]

==L2 Network Architecture with Single Controller ==
vBridge Interface Mapping Example for Single Controller:

[[File:Single Controller Mapping.png|border|530px]]
* Create a Controller
{| class="wikitable"
|-
| curl -v  -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"controller": {"controller_id": "controllerone", "ipaddr":"10.0.0.2", "type": "odc", "version": "1.0", "auditstatus":"enable"}}' http://127.0.0.1:8080/vtn-webapi/controllers.json
|}

* Create a VTN 
{| class="wikitable"
|-
| curl -v  -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"vtn" : {"vtn_name":"vtn1","description":"test VTN" }}' http://127.0.0.1:8080/vtn-webapi/vtns.json 
|}

* Create a vBridge in the VTN 
{| class="wikitable"
|-
| curl -v  -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"vbridge" : {"vbr_name":"vBridge1","controller_id":"controllerone","domain_id":"Default" }}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges.json
|}

* Create two Interfaces into the vBridge 
{| class="wikitable"
|-
| curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"interface": {"if_name": "if1","description": "if_desc1"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces.json
|-
| curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"interface": {"if_name": "if2","description": "if_desc2"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces.json
|-
|}

* Configure two mappings on the interfaces 
{| class="wikitable"
|-
| curl -v -X PUT -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"portmap":{"logical_port_id": "PP-00:00:00:00:00:00:00:03-s3-eth1","vlan_id": "2","tagged": "true"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces/if1/portmap.json
|-
| curl -v -X PUT -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1'   -d '{"portmap":{"logical_port_id": "PP-00:00:00:00:00:00:00:02-s2-eth1","vlan_id": "2","tagged": "true"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces/if2/portmap.json
|-
|}

* Send packets from Host1 to Host3
