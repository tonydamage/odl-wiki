= Base Edition Test Plan =
==Prerequisites==
* Start mininet (i.e. mininet> sudo mn --controller=remote,ip=10.125.136.52 --topo tree,2)
** This generates 3 nodes: SW1 (*:01), SW2 (*:02), SW3 (*:03)
** SW1 has 2 ports: 1,2 that connects to SW2 and SW3
** SW2 has 3 ports: 1 to host1 (10.0.0.1), 2 to host2 (10.0.0.2) and 3 to SW1
** SW3 has 3 ports: 1 to host3 (10.0.0.3), 2 to host4 (10.0.0.4) and 3 to SW1
* Start Opendaylight Controller at 10.125.136.52 , and make sure mininet has all switches connected to the controller.
* Run the test tool (TODO: Provide automatic test tool).

==Test Content==
* ARP Handler (Handles ARP messages)
** list subnets (i.e. GET http://10.125.136.52:8080/controller/nb/v2/subnetservice/default/subnets)
** add subnet gateway (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/subnetservice/default/subnet/test + [[CrossProject:Integration_Group:REST_Body#Subnet_Body|subnet body]]) and list subnets
** ping on mininet (i.e. mininet> h1 ping -c 3 h4), verify it works
** list hosts (i.e. GET http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/hosts/active), check h1 and h4

* Clear all
** remove static route (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/staticroute/default/route/route1) and list routes
** remove subnet gateway (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/subnetservice/default/subnet/test) and list subnets

* Clustering Manager (Manages shared cache across controller instances) 
** Will be added later

* Configuration (Handles controller configuration)
** save configuration (i.e. POST http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/save)
** restart controller
** list flows after controller restart (i.e. GET http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/default)
** show flow stats after controller restart (i.e. GET http://10.125.136.52:8080/controller/nb/v2/statistics/default/flow)

* Container Manager (Manages Network Slicing) 
** list containers (i.e. GET http://10.125.136.52:8080/controller/nb/v2/containermanager/containers)
** create container cont1 including SW2 port1, SW3 port1 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1 + [[CrossProject:Integration_Group:REST_Body#Container1_Body|container1 body]]) and list containers
** add flowspecs to cont1 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1/flowspec/toh3 + [[CrossProject:Integration_Group:REST_Body#Flowspec_Body|flowspec body]])
** list cont1 flowspecs (i.e. GET http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1/flowspecs)
** add node connectors SW1 port1,2 SW2 port3 SW3 port3 to cont1 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1/nodeconnector + [[CrossProject:Integration_Group:REST_Body#Nodeconnector_Body|nodeconnector body]]) )
** list cont1 connectors (i.e. GET http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1/nodeconnectors)
** add all flows (6) needed in container cont1 so that h1 can ping h3
** list flows in container cont1 (i.e. GET http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/cont1)
** ping on mininet (i.e. mininet> h1 ping -c 3 h3), verify it works
** show cont1 flow stats (i.e. GET http://10.125.136.52:8080/controller/nb/v2/statistics/cont1/flow) and check packet count=3
** create container cont2 including SW1 port1,2 SW2 ports2,3 SW3 port2,3 and flowspecs (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont2 + [[CrossProject:Integration_Group:REST_Body#Container2_Body|container2 body]]) and list containers
** add all flows (6) needed in container cont2 so that h2 can ping h4
** list flows in container cont2 (i.e. GET http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/cont2)
** ping on mininet (i.e. mininet> h2 ping -c 3 h4), verify it works
** show cont2 flow stats (i.e. GET http://10.125.136.52:8080/controller/nb/v2/statistics/cont2/flow) and check packet count=3
** remove cont1 node connectors SW1 port1,2 SW2 port3 SW3 port3 (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1/nodeconnector + [[CrossProject:Integration_Group:REST_Body#Nodeconnector_Body|nodeconnector body]]) and list cont1 connectors
** remove cont1 flow spec (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/containermanager/container/default/flowspec/toh3) and list cont1 flowspecs
** remove container cont1 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont1) and list containers
** remove container cont2 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/containermanager/container/cont2) and list containers

* Forwarding Manager (Installs Route and tracks next-hop) 
** list static routes (i.e. GET http://10.125.136.52:8080/controller/nb/v2/staticroute/default/routes)
** add static route with next-hop h2 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/staticroute/default/route/route1 + [[CrossProject:Integration_Group:REST_Body#Route_Body|route body]]) and list routes
** list hosts (i.e. GET http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/hosts/active), check h2

* Forwarding Rules Manager 1 (Installs Flows on SB devices) 
** list flows (i.e. GET http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/default) 
** add flow1 to reach host1 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/default/node/OF/00:00:00:00:00:00:00:02/staticFlow/flow1 + [[CrossProject:Integration_Group:REST_Body#Flow1_Body|flow1 body]]) and list flows
** add flow2 to reach host2 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/default/node/OF/00:00:00:00:00:00:00:02/staticFlow/flow2 + [[CrossProject:Integration_Group:REST_Body#Flow2_Body|flow2 body]]) and list flows
** add static arp for h2 on mininet (i.e. mininet> h1 arp -s h2 52:2a:e7:ca:3e:6c) (h2 MAC address: mininet> h2 ifconfig)
** add static arp for h1 on mininet (i.e. mininet> h2 arp -s h1 8e:ad:13:44:4d:8c) (h1 MAC address: mininet> h1 ifconfig)

* Forwarding Rules Manager 2 (Removes Flows on SB devices) 
** remove static arp for h2 on mininet (i.e. mininet> h1 arp -d h2)
** remove static arp for h1 on mininet (i.e. mininet> h2 arp -d h1)
** remove flow1 (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/default/node/OF/00:00:00:00:00:00:00:02/staticFlow/flow1) and list flows
** remove flow2 (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/flowprogrammer/default/node/OF/00:00:00:00:00:00:00:02/staticFlow/flow2) and list flows

* Host Tracker (Tracks connected hosts) and Simple Forwarding (creates flows for connected hosts)
** list hosts (i.e. GET http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/hosts/active)
** add static host1 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/address/10.0.0.1 + [[CrossProject:Integration_Group:REST_Body#Host1_Body|host1 body]]) and list hosts
** add static host4 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/address/10.0.0.4 + [[CrossProject:Integration_Group:REST_Body#Host4_Body|host4 body]]) and list hosts
** add static arp for h4 on mininet (i.e. mininet> h1 arp -s h4 5e:bf:79:84:10:a6) (h4 MAC address: mininet> h4 ifconfig)
** add static arp for h1 on mininet (i.e. mininet> h4 arp -s h1 8e:ad:13:44:4d:8c) (h1 MAC address: mininet> h1 ifconfig)
** ping on mininet (i.e. mininet> h1 ping -c 3 h4), verify it works
** remove static arp for h4 on mininet (i.e. mininet> h1 arp -d h4)
** remove static arp for h1 on mininet (i.e. mininet> h4 arp -d h1)
** remove static host1 (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/address/10.0.0.1) and list hosts
** remove static host4 (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/hosttracker/default/address/10.0.0.4) and list hosts

* Netconf Plugin
** Will be added later

* OpenFlow 1.3 Plugin
** Will be added later

* Statistics Manager (Collects Statistics information) 
** ping on mininet (i.e. mininet> h1 ping -c 3 h2), verify it works
** show flow stats (i.e. GET http://10.125.136.52:8080/controller/nb/v2/statistics/default/flow) and check packet count=3
** show port stats (i.e. GET http://10.125.136.52:8080/controller/nb/v2/statistics/default/port) and check packet count for h1,h2 ports has increased in 3
** show table stats (i.e. GET http://10.125.136.52:8080/controller/nb/v2/statistics/default/table) and check lookup count for Switch2 has increased in 6

* Switch Manager (Handles SB devices Information)
** list all nodes and their properties (i.e. GET http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/nodes)
** add property "description" to SW2 (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/node/OF/00:00:00:00:00:00:00:02/property/description/Switch2) and list nodes
** remove SW2 property "description" to a node (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/node/OF/00:00:00:00:00:00:00:02/property/description) and list nodes
** list all connectors and properties for SW2 (i.e. GET http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/node/OF/00:00:00:00:00:00:00:02)
** add property "bandwidth" to a SW2 connector (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/nodeconnector/OF/00:00:00:00:00:00:00:02/OF/2/property/bandwidth/1000) and list SW2 connectors
** remove property "bandwidth" to a SW2 connector (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/switchmanager/default/nodeconnector/OF/00:00:00:00:00:00:00:02/OF/2/property/bandwidth) and list SW2 connectors

* Topology Manager (Builds network topology) 
** show topology (i.e. GET http://10.125.136.52:8080/controller/nb/v2/topology/default)
** list userlinks (i.e. GET http://10.125.136.52:8080/controller/nb/v2/topology/default/userLinks)
** add userlink (i.e. PUT http://10.125.136.52:8080/controller/nb/v2/topology/default/userLink/link1 + [[CrossProject:Integration_Group:REST_Body#UserLink_Body|userlink body]]), list userlinks and get topology
** remove userlink (i.e. DELETE http://10.125.136.52:8080/controller/nb/v2/topology/default/userLink/link1), list userlinks and get topology

[[Category:Integration Group]]
