'''[[OpenDaylight Controller:Pulling, Hacking, and Pushing the Code from the CLI|<<< Back to Pulling, Hacking, and Pushing the Code from the CLI]]'''

Gerrit provides a framework for reviewing commits before they are accepted into the code base. Changes can be uploaded to Gerrit but are not made a part of the project until the changes been reviewed and accepted. Gerrit is also a good collaboration tool for storing the conversations that occur around the commits.

Due to the project's current locked-down state, you can only get the code after you have created a Gerrit account and registered an SSH key.

=== Authenticating into Gerrit ===

Navigate to Gerrit at https://git.opendaylight.org/gerrit/. This link works best in Firefox or Chrome.

The main page shows existing Gerrit requests, patches that folks have pushed that have not yet been verified, reviewed, and merged into the authoritative repo.

[[File:Gerrit landing page.png|570px]]

===== Existing OpenDaylight Users =====

If you already have an OpenDaylight account, you can click "Sign In" in the top right corner of the page. You'll land at the following site, where you can use your existing OpenDaylight credentials to sign in.

[[File:Gerrit existing user signin.png|570px]]

===== New OpenDaylight Users =====

If you don't have an OpenDaylight account, you'll need to create one.

Click on the "Account signup / management" link on the top bar of the main Gerrit page.

[[File:Gerrit link to signup page.png|570px]]

From the resulting page, click "Sign-up" in the left menu bar. This guide currently assumes that you'll create a new account, but there's also an option for authenticating with OpenID that you could diverge to at this point.

[[File:Link to account signup at identity.opendaylight.png|570px]]

Click on the goofy image under "Sign-up with User Name / Password" to continue to the actual sign-up page.

[[File:Goofy image that links to account signup.png|570px]]

Fill out the account creation form and click "Submit" to complete the sign up process.

[[File:OpenDaylight account signup page.png|570px]]

You now have an OpenDaylight account that can be used with Gerrit to pull the code (once you setup an SSH key, see below). Congrats!

=== Register SSH Key with Gerrit ===

Your next setup step should be to set up an SSH key. Note that the key you enter here must be identical to the one you will
use later to pull/edit the code. Thus keep your dev environment's UIDs/Keys consistent - or at least understand which one 
you have to use where because they are not interchangeable!  For example, if you have a development VM which has a different 
UID login (and different Keygen) than your laptop (where you might be using the browser to access this page from), the keys
you generate there can differ from ones you generated in the VM. If you upload the key generated on your laptop and do not
reuse it on your dev VM and try to use git there, the pull will fail.

For the less visually oriented, there is [http://gerrit.googlecode.com/svn/documentation/2.0/user-upload.html Gerrit has excellent documentation]... but visual are shown below:

[[File:Gerrit_Setup_-_Gettting_to_Settings.jpg|570px]]

[[File:Gerrit_Setup_-_Settings.jpg|570px]]

Then click '''SSH Public Keys''' as shown below

[[File:Gerrit Setup Settings.jpg|570px]]

And enter your ssh key.  If you do not have an ssh key, there are wonderful [https://help.ubuntu.com/community/SSH/OpenSSH/Keys Instructions for generating an ssh key] and if you have one you can get it using

 '''cat ~/.ssh/id_rsa.pub''' 

Once you've pasted your SSH key, click ""Add""

[[File:Gerrit Setup Add SSH Key.jpg|570px]]

and you will see it as shown below:

[[File:Gerrit Setup Show SSH Key.jpg|570px]]

To verify your SSH key is working correctly, try using an SSH client to connect to Gerrit's SSHD port. 

 $ '''ssh -p 29418''''' <sshusername>'''''@git.opendaylight.org'''
 Enter passphrase for key '/home/cisco/.ssh/id_rsa': 
 
   ****    Welcome to Gerrit Code Review    ****
 
   Hi <user>, you have successfully connected over SSH.
 
   Unfortunately, interactive shells are disabled.
   To clone a hosted Git repository, use:
 
   git clone ssh://<user>@git.opendaylight.org:29418/REPOSITORY_NAME.git
 
 Connection to git.opendaylight.org closed.

You can now proceed to either [[OpenDaylight Controller:Pulling, Hacking, and Pushing the Code from the CLI|Pulling, Hacking, and Pushing the Code from the CLI]] or [[OpenDaylight Controller:Pulling, Hacking, and Pushing the Code from Eclipse|Pulling, Hacking, and Pushing the Code from Eclipse]], depending on your implementation.

[[Category:OpenDaylight Controller]]
