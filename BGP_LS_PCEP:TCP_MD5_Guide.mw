This user guide describes the configuration for BGP and PCEP protocols using TCP MD5 authentication.
'''Before you continue with steps in this user guide, make sure BGP and/or PCEP is configured first via [[BGP LS PCEP:User Guide|User Guide]]'''

TCP MD5 authentication is '''disabled''' by default. To enable it (for both protocols), uncomment the contents of [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/20-tcpmd5.xml 20-tcpmd5.xml]

'''There is no warning/error when the connection can't be established, so be sure to double-check your configuration and passwords.'''

== BGP ==
== PCEP ==
To enable TCP MD5 for PCE protocol, you have to follow two steps.

1. In [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/32-pcep.xml 32-pcep.xml] uncomment the TCP MD5 section:

 <nowiki><!--</nowiki>
  Uncomment this block to enable TCP MD5 Signature support
 <nowiki>--></nowiki>
 <md5-channel-factory>
  <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:tcpmd5:netty:cfg">prefix:md5-channel-factory</type>
   <name>md5-client-channel-factory</name>
 </md5-channel-factory>
 <md5-server-channel-factory>
  <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:tcpmd5:netty:cfg">prefix:md5-server-channel-factory</type>
   <name>md5-server-channel-factory</name>
 </md5-server-channel-factory>

2. In [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/39-pcep-provider.xml 39-pcep-provider.xml] uncomment following section:

 <nowiki><!--</nowiki>
  For TCP-MD5 support make sure the dispatcher has the "md5-server-channel-factory"
  attribute set and then set the appropriate client entries here. Note that if this
  option is configured, the PCCs connecting here must have the same password configured,
  otherwise they will not be able to connect at all.
  <nowiki>--></nowiki>
  <client>
  <address>192.0.2.2</address>
   <password>changeme</password>
  </client>

and provide password matching the one set on PCC. How to set a password on PCC is out of the scope of this document.
