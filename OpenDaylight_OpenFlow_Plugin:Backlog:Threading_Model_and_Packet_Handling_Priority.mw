This page captures Muthu's work on the threading model and packat handling priorities

=The Proposed Thread Model for the OF1.3 Plugin / OF NSFs=
The propsoed model is shown in the following figure:

[[File:OF_Threading_Model.jpg]]

==Thread Pools==
* Socket I/O Threadpool
** Owned by : Netty I/O library
** Lifecycle managed by : OFLibrary
** Functionality : 
*** Multiplexed socket I/O operations 
*** Escalating events to execution thread pool
** Special Requirements : Should not perform complex operations which can introduce latency and create head-of-line blocking for other connections
** Configuration Management : Config subsystem (or simple ini file ?) 

* Execution Threadpool
** Owned by : Netty I/O library
** Lifecycle managed by : OFLibrary
** Functionality :
*** Executes entire business logic of OpenflowPlugin (including priority-assignment, processing and notification-publishing to MD-SAL) 
*** Ensures order of messages from Socket I/O thread pool on per socket basis. But order need not be  guaranteed across connections of same switch
*** Packet classification to assign priorities (see slide 6 for details)
*** Assign configured priorities for each message from each switch-connection (see slide 6 for details)
** Special Requirements : 
*** All current business logic (handshake, translation, publishing notifications) must be adapted to run in this thread pool
*** No internal queue must be maintained within this execution-context (because Netty’s I/O threadpool to execution thread-pool by itself is a transition via internal Netty’s queue)
** Configuration Management : Config subsystem (or simple ini file ?) 

=Packet Handling Priorities=
