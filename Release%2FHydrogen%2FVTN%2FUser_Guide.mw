=Overview and Architecture=

===Conceptual Overview===
OpenDaylight Virtual Tenant Network (VTN) is an application that provides multi-tenant virtual network on an SDN controller.

Conventionally, huge investment in the network systems and operating expenses are needed because the network is configured as a silo for each department and system. So, various network appliances must be installed for each tenant and those boxes cannot be shared with others. It is a heavy work to design, implement and operate the entire complex network.

The uniqueness of VTN is a logical abstraction plane. This enables the complete separation of logical plane from physical plane. Users can design and deploy any desired network without knowing the physical network topology or bandwidth restrictions.

VTN allows the users to define the network with a look and feel of conventional L2/L3 network. Once the network is designed on VTN, it will automatically be mapped into underlying physical network, and then configured on the individual switch leveraging SDN control protocol. The definition of logical plane makes it possible not only to hide the complexity of the underlying network but also to better manage network resources. It achieves reducing reconfiguration time of network services and minimizing network configuration errors.

[[File:Network Virtualization.jpg|550px]]

For more details please click on the link:[[OpenDaylight Virtual Tenant Network (VTN):Overview|VTN overview]]
===Architecture Overview===
VTN Application has been designed as two components
   '''VTN Manager''' - A OpenDayLight Controller Plugin that interacts with other modules to implement the components 
                  of the VTN model. It also provides a REST interface to configure VTN components in ODL controller.
       
   '''VTN Coordinator''' - An External Application that provides a REST interface to user to use the VTN Virtualization. 
                      It interacts with VTN Manager plugin to implement the user configuration. It is also capable of
                      multiple controller orchestration.

[[File:VTN_APPLICATION_ARCHITECTURE.png||Architecture diagram]]

*[[OpenDaylight Virtual Tenant Network (VTN):VTN Manager|VTN Manager Detailed Implementation]]
*[[OpenDaylight Virtual Tenant Network (VTN):VTN Coordinator|VTN Coordinator Detailed Implementation]]

=Installation Guide =
[[OpenDaylight Virtual Tenant Network (VTN):Installation:VTN Coordinator|Install VTN Coordinator from Source]]

[[OpenDaylight Virtual Tenant Network (VTN):Installation:VTN Manager|Install VTN Manager from source]]

[[OpenDaylight Virtual Tenant Network (VTN):Installation:Virtualization Edition (Hydrogen)|Installation from Virtualization Edition (Hydrogen)]]

=Installation Troubleshooting=
[[OpenDaylight Virtual Tenant Network (VTN):Installation:Troubleshooting|VTN Coordinator Troubleshooting]]

=Configuration=
[[OpenDaylight Virtual Tenant Network (VTN):Installation:Configuration|VTN Coordinator Configuration]]

=Tutorial / How-To=
== Assumptions ==
* VTN Coordinator is installed and configured to accept requests in 8080
* The ODL controller is enabled to work with VTN virtualization (i.e. executed as ./run.sh -virt vtn)
* The Controller is reachable from VTN Coordinator

==Example==
All requests are ported to VTN Coordinator.
This Example explains about mapping interface and sending packets between hosts for single controller using mininet:
“mininet” details and set-up can be referred at below URL: https://wiki.opendaylight.org/view/OpenDaylight_Controller:Installation#Using_Mininet

Single Controller Topology:
 [[File:Example VTN.png|600px]]

* “mininet” command for above topology:
  mininet@mininet-vm:~$ sudo mn --controller=remote,ip=<controller-ip> --topo tree,2

* Create a Controller
{|class = "wikitable"
|-
|curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"controller": {"controller_id": "controllerone", "ipaddr":"<controller-ip>", "type": "odc", "version": "1.0", "auditstatus":"enable"}}' http://127.0.0.1:8080/vtn-webapi/controllers.json
|}

* Create a VTN 
{|class = "wikitable"
|-
|curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"vtn" : {"vtn_name":"vtn1","description":"test VTN" }}' http://127.0.0.1:8080/vtn-webapi/vtns.json
|}

* Create a vBridge in the VTN 
{|class = "wikitable"
|-
|curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"vbridge" : {"vbr_name":"vBridge1","controller_id":"controllerone","domain_id":"(DEFAULT)" }}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges.json
|}

* Create two Interfaces into the vBridge 
{|class = "wikitable"
|-
|curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"interface": {"if_name": "if1","description": "if_desc1"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces.json
|-
|curl -v -X POST -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"interface": {"if_name": "if2","description": "if_desc2"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces.json
|}

* Get the list of logical ports configured
{|class = "wikitable"
|-
|curl -v -X GET -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' http://127.0.0.1:8080/vtn-webapi/controllers/controllerone/domains/\(DEFAULT\)/logical_ports.json
|}

* Configure two mappings on the interfaces 
{|class = "wikitable"
|-
|curl -v -X PUT -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"portmap":{"logical_port_id": "PP-00:00:00:00:00:00:00:03-s3-eth1"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces/if1/portmap.json
|-
|curl -v -X PUT -H 'content-type: application/json' -H 'username: admin' -H 'password: adminpass' -H 'ipaddr:127.0.0.1' -d '{"portmap":{"logical_port_id": "PP-00:00:00:00:00:00:00:02-s2-eth1"}}' http://127.0.0.1:8080/vtn-webapi/vtns/vtn1/vbridges/vBridge1/interfaces/if2/portmap.json
|}

* Send packets from Host1 to Host3
{|class = "wikitable"
|-
|mininet> h1 ping h3
|}

Refer to below URL for more details and multi-controller scenario: https://wiki.opendaylight.org/view/OpenDaylight_Virtual_Tenant_Network_(VTN):VTN_Coordinator:RestApi:L2_Network_Example_Using_VTN_Virtualization_Hydrogen

=Web/Graphical Interface=
:None

=Command Line Interface=
:None

=Console Interface=
:None

=Programmatic Interface(s)=
Refer to the link [[Release/Hydrogen/VTN/OpenDaylight_Virtual_Tenant_Network_(VTN):Developer_Guide#Programmatic_Interface.28s.29|Programmatic Interface for VTN API's]] for the details on VTN API's

=Help=
* VTN dev mailing lists:
** vtn-dev@lists.opendaylight.org

* VTN users mailing lists:
** vtn-users@lists.opendaylight.org


[[Category:OpenDaylight Virtual Tenant Network]]
