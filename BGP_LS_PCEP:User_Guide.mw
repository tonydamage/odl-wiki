=== BGP ===
OpenDaylight SP edition comes pre-configured with baseline BGP configuration. You can find it in the opendaylight/configuration/initial directory and it consists of two files:
* [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/31-bgp.xml 31-bgp.xml], which defines the basic parser and RIB support. Unless you need to add a new AFI/SAFI, you should keep this file as is

* [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/41-bgp-example.xml 41-bgp-example.xml], which contains a sample configuration which needs to be customized to your deployment.

'''<big>Currently the configuration for BGP peer is ignored in the configuration, to  prevent the client from starting with default configuration. Therefore the first step is to uncomment ALL the commented parts in this file.</big>'''

==== Adjust values for initial BGP Open message ====

 <module>
     <type>prefix:rib-impl</type>
     <name>example-bgp-rib</name>
     <rib-id>example-bgp-rib</rib-id>
     <local-as>64496</local-as>         // Our AS number, we use this in best path selection
     <bgp-id>192.0.2.2</bgp-id>         // Our BGP identifier, we use this in best path selection

==== Specify IP address of your BGP speaker ====
 <module>
     <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:bgp:rib:impl">prefix:bgp-peer</type>
     <name>example-bgp-peer</name>
     <host>192.0.2.1</host>                         // IP address or hostname of the speaker
     <holdtimer>180</holdtimer>
 
You can also add more BGP peers by copying above module.

==== Configure connection attributes (all in milliseconds) ====

 <module>
    <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:reconnectstrategy">prefix:timed-reconnect-strategy</type>
    <name>example-reconnect-strategy</name>
    <min-sleep>1000</min-sleep>             // Minimum sleep time in between reconnect tries
    <max-sleep>180000</max-sleep>           // Maximum sleep time in between reconnect tries
    <sleep-factor>2.00</sleep-factor>       // Power factor of the sleep time between reconnect tries
    <connect-time>5000</connect-time>       // How long we should wait for the TCP connect attempt, overrides default connection timeout dictated by TCP retransmits
    <executor>
        <type xmlns:netty="urn:opendaylight:params:xml:ns:yang:controller:netty">netty:netty-event-executor</type>
        <name>global-event-executor</name>
    </executor>
 </module>

=== PCEP ===
OpenDaylight SP edition comes pre-configured with baseline PCEP configuration.The default shipped configuration will start a PCE server on port 4189.

* [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/32-pcep.xml 32-pcep.xml] - basic PCEP configuration, including session parameters
* [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/39-pcep-provider.xml 39-pcep-provider.xml] - configuration for PCEP provider

==== Configure draft versions ====

There are already two extensions for PCEP: <br />
'''[http://tools.ietf.org/html/draft-ietf-pce-stateful-pce draft-ietf-pce-stateful-pce]''' - in versions 02 and 07 <br />
'''[http://tools.ietf.org/html/draft-ietf-pce-pce-initiated-lsp draft-ietf-pce-pce-initiated-lsp]''' - versions crabbe-initiated-00 and ietf-initiated-00 <br />

Note, that they extend each other, so it is vital to load the extensions with compatible versions. In this case crabbe-initiated-00 is compatible with stateful-02 and ietf-initiated-00 is compatible with stateful-07. Default configuration is to use newest versions of the drafts. If you want to use older version, switch commented code to ignore stateful-7 and ietf-initiated-00 versions. <br />

In [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/32-pcep.xml 32-pcep.xml]:

 <module>
    <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:pcep:impl">prefix:pcep-parser-ietf-stateful07</type>
    <name>pcep-parser-ietf-stateful07</name>
 </module>
 <module>
    <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:pcep:impl">prefix:pcep-parser-ietf-initiated00</type>
    <name>pcep-parser-ietf-initiated00</name>
 </module>
 <nowiki><!--module>
    <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:pcep:impl">prefix:pcep-parser-ietf-stateful02</type>
    <name>pcep-parser-ietf-stateful02</name>
 </module>
 <module>
    <type xmlns:prefix="urn:opendaylight:params:xml:ns:yang:controller:pcep:impl">prefix:pcep-parser-crabbe-initiated00</type>
    <name>pcep-parser-crabbe-initiated00</name>
 </module--></nowiki>

Make sure the proposal matches your chosen draft version:

 <pcep-session-proposal-factory>
     <type>pcep:pcep-session-proposal-factory</type>
     <name>stateful07-proposal</name>
 </pcep-session-proposal-factory>

In [https://jenkins.opendaylight.org/integration/view/Integration%20jobs/job/integration-project-centralized-integration/lastSuccessfulBuild/artifact/distributions/serviceprovider/target/distributions-serviceprovider-0.1.2-SNAPSHOT-osgipackage/opendaylight/configuration/initial/39-pcep-provider.xml 39-pcep-provider.xml], stateful-plugin also needs to match:

 <stateful-plugin>
     <type>prefix:pcep-topology-stateful</type>
     <name>stateful07</name>
 </stateful-plugin>

== Mailing Lists ==
If you have any questions, feel free to write to one of our mailing lists:

* [https://lists.opendaylight.org/mailman/listinfo/bgpcep-announce bgpcep-announce], a low-volume list for announcements
* [https://lists.opendaylight.org/mailman/listinfo/bgpcep-users bgpcep-users], the general user support list
