== Introduction ==

The purpose of this page is to walk you through how to see the Inventory Manager working end to end with the openflowplugin using OpenFlow 1.3.

Basically, you will learn how to:

# Run the Base Edition with the new openflowplugin
# Start mininet to use OF 1.3
# Use RESTCONF to see the nodes appear in inventory.

== Building a Base Edition that has the new openflowplugin ==

# Checkout the openflowplugin project (if you need help with this see [[GettingStarted:Pulling,_Hacking,_and_Pushing_All_the_Code_from_the_CLI|Pulling Hacking and Pushing All the Code from the CLI]] ).
# cd into the openflowplugin/distribution/base directory
#: <pre>cd openflowplugin/distribution/base</pre>
# Build the distribution
#: <pre>mvn clean install</pre>
# Run the controller
#: <pre>cd target/distributions-openflowplugin-base-0.0.1-SNAPSHOT-osgipackage/opendaylight/</pre>
#: <pre>./run.sh -debug</pre>

== Getting Mininet with OF 1.3 ==

[https://www.dropbox.com/s/dbf9a372elqs1s1/mininet-of-1.3.zip Download Mininet VM Upgraded to OF 1.3]

(or you could build one yourself [[Openflow Protocol Library:OpenVirtualSwitch|Instructions for setting up Mininet with OF 1.3]] ).

=== Installing under VirtualBox ===

[[File:Host-only-vbox.png|thumb|right|300px|configuring a host-only adapter]]

For whatever reason, at leas ton the Mac, NATed interfaces in VirtualBox don't actually seem to allow for connections from the host to the VM. Instead, you need to configure a host-only network and set it up. Do this by:

* Go to the VM's settings in VirtualBox then to network and add a second adapter attached to "Host-only Adapter" (see the screenshot to the right)
* Edit the /etc/network/interfaces file to configure the adapter properly by adding these two lines
<pre>auto eth1
iface eth1 inet dhcp</pre>
* Reboot the VM

At this point you should have two interfaces one which gives you NATed access to the internet and another that gives you access between your mac and the VMs. At least for me, the NATed interface gets a 10.0.2.x address and the the host-only interface gets a 192.168.56.x address.

== Running Mininet with OF 1.3 ==

From within the Mininet VM, run:

<pre> sudo mn --topo single,3  --controller 'remote,ip=<your controller ip>:6653' --switch ovsk,protocols=OpenFlow13</pre>

== Restconf for Inventory ==

The REST url for listing all the nodes is:

<pre>http://localhost:8080/restconf/datastore/opendaylight-inventory:nodes/</pre>

You will need to set the Accept header:
<pre>Accept: application/vnd.yang.api+xml</pre>
You will also need to use HTTP Basic Auth with username: admin password: admin.

Alternately, if you have a node's id you can address it as
<pre>http://localhost:8080/restconf/datastore/opendaylight-inventory:nodes/node/<id></pre>
for example
<pre>http://localhost:8080/restconf/datastore/opendaylight-inventory:nodes/node/openflow:1</pre>

=== How to hit Restonf with Postman ===

[https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en Install Postman for Chrome]

In the chrome browser bar enter 
<pre>chrome://apps/</pre>
And click on Postman.

Enter the URL.  Click on the Headers button on the far right.  Enter the Accept: header.  Click on the Basic Auth Tab at the top and setup the username and password.  Send.

=== Know Bug ===

If you have not had any switches come up, and though no children for 
http://localhost:8080/restconf/datastore/opendaylight-inventory:nodes/
and exception will be thrown.  I'm pretty sure I know how to fix this bug, just need to get to it :)
